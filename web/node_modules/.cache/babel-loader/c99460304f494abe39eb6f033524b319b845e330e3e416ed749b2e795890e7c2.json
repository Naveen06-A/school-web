{"ast":null,"code":"import React,{useState,useEffect}from'react';import{TeacherCard}from'../components/TeacherCard';import{StudentCard}from'../components/StudentCard';import{apiService}from'../services/api';import'./TeachersPage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const TeachersPage=()=>{const[teachers,setTeachers]=useState([]);const[selectedTeacher,setSelectedTeacher]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[usingFallback,setUsingFallback]=useState(false);useEffect(()=>{loadTeachers();},[]);const loadTeachers=async()=>{try{setLoading(true);setError(null);const data=await apiService.getTeachersWithStudents();setTeachers(data);// Check if we're using fallback data (no students in first teacher)\nif(data.length>0&&data[0].students.length===0){setUsingFallback(true);}}catch(error){console.error('Failed to load teachers:',error);setError('Failed to load data. Using demo data instead.');setUsingFallback(true);// Load fallback data manually\nconst fallbackData=[{id:1,name:\"Dr. Sarah Johnson\",subject:\"Mathematics\",email:\"sarah.johnson@school.edu\",phone:\"+1-555-0101\",experience:\"8 years\",avatar:\"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150\",students:[{id:1,name:\"Alice Brown\",grade:\"A\",email:\"alice.brown@student.edu\",phone:\"+1-555-0201\",teacherId:1,avatar:\"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150\"},{id:2,name:\"Bob Smith\",grade:\"B+\",email:\"bob.smith@student.edu\",phone:\"+1-555-0202\",teacherId:1,avatar:\"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150\"}]},{id:2,name:\"Prof. Michael Chen\",subject:\"Physics\",email:\"michael.chen@school.edu\",phone:\"+1-555-0102\",experience:\"12 years\",avatar:\"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150\",students:[{id:3,name:\"Carol White\",grade:\"A-\",email:\"carol.white@student.edu\",phone:\"+1-555-0203\",teacherId:2,avatar:\"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150\"}]}];setTeachers(fallbackData);}finally{setLoading(false);}};const handleViewStudents=teacher=>{setSelectedTeacher(teacher);};const handleBackToList=()=>{setSelectedTeacher(null);};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading teachers...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"teachers-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"School Management System\"}),/*#__PURE__*/_jsx(\"p\",{children:\"List of Teachers and Their Students\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-banner\",children:[\"\\u26A0\\uFE0F \",error,usingFallback&&/*#__PURE__*/_jsxs(\"span\",{children:[\"Make sure the backend server is running:\",/*#__PURE__*/_jsx(\"code\",{children:\"cd backend && npm start\"})]})]}),usingFallback&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"warning-banner\",children:\"\\uD83D\\uDD27 Using demo data - Backend server not detected\"})]}),selectedTeacher?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:handleBackToList,children:\"\\u2190 Back to Teachers\"}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Students of \",selectedTeacher.name]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"teacher-detail\",children:[/*#__PURE__*/_jsx(\"img\",{src:selectedTeacher.avatar,alt:selectedTeacher.name,className:\"teacher-detail-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"teacher-detail-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:selectedTeacher.name}),/*#__PURE__*/_jsxs(\"p\",{children:[selectedTeacher.subject,\" \\u2022 \",selectedTeacher.experience]}),/*#__PURE__*/_jsx(\"p\",{children:selectedTeacher.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"students-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Students (\",selectedTeacher.students.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"students-list\",children:selectedTeacher.students.map(student=>/*#__PURE__*/_jsx(StudentCard,{student:student},student.id))})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"teachers-list\",children:teachers.map(teacher=>/*#__PURE__*/_jsx(TeacherCard,{teacher:teacher,studentCount:teacher.students.length,onViewStudents:()=>handleViewStudents(teacher)},teacher.id))})]});};","map":{"version":3,"names":["React","useState","useEffect","TeacherCard","StudentCard","apiService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeachersPage","teachers","setTeachers","selectedTeacher","setSelectedTeacher","loading","setLoading","error","setError","usingFallback","setUsingFallback","loadTeachers","data","getTeachersWithStudents","length","students","console","fallbackData","id","name","subject","email","phone","experience","avatar","grade","teacherId","handleViewStudents","teacher","handleBackToList","className","children","onClick","src","alt","map","student","studentCount","onViewStudents"],"sources":["A:/Desktop/web/web/src/pages/TeachersPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { TeacherCard } from '../components/TeacherCard';\nimport { StudentCard } from '../components/StudentCard';\nimport { apiService } from '../services/api';\nimport { TeacherWithStudents } from '../../../shared/types';\nimport './TeachersPage.css';\n\n\nexport const TeachersPage: React.FC = () => {\n  const [teachers, setTeachers] = useState<TeacherWithStudents[]>([]);\n  const [selectedTeacher, setSelectedTeacher] = useState<TeacherWithStudents | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [usingFallback, setUsingFallback] = useState(false);\n\n  useEffect(() => {\n    loadTeachers();\n  }, []);\n\n  const loadTeachers = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await apiService.getTeachersWithStudents();\n      setTeachers(data);\n      \n      // Check if we're using fallback data (no students in first teacher)\n      if (data.length > 0 && data[0].students.length === 0) {\n        setUsingFallback(true);\n      }\n    } catch (error) {\n      console.error('Failed to load teachers:', error);\n      setError('Failed to load data. Using demo data instead.');\n      setUsingFallback(true);\n      \n      // Load fallback data manually\n      const fallbackData: TeacherWithStudents[] = [\n        {\n          id: 1,\n          name: \"Dr. Sarah Johnson\",\n          subject: \"Mathematics\",\n          email: \"sarah.johnson@school.edu\",\n          phone: \"+1-555-0101\",\n          experience: \"8 years\",\n          avatar: \"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150\",\n          students: [\n            {\n              id: 1,\n              name: \"Alice Brown\",\n              grade: \"A\",\n              email: \"alice.brown@student.edu\",\n              phone: \"+1-555-0201\",\n              teacherId: 1,\n              avatar: \"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150\"\n            },\n            {\n              id: 2,\n              name: \"Bob Smith\",\n              grade: \"B+\",\n              email: \"bob.smith@student.edu\",\n              phone: \"+1-555-0202\",\n              teacherId: 1,\n              avatar: \"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150\"\n            }\n          ]\n        },\n        {\n          id: 2,\n          name: \"Prof. Michael Chen\",\n          subject: \"Physics\",\n          email: \"michael.chen@school.edu\",\n          phone: \"+1-555-0102\",\n          experience: \"12 years\",\n          avatar: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150\",\n          students: [\n            {\n              id: 3,\n              name: \"Carol White\",\n              grade: \"A-\",\n              email: \"carol.white@student.edu\",\n              phone: \"+1-555-0203\",\n              teacherId: 2,\n              avatar: \"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150\"\n            }\n          ]\n        }\n      ];\n      setTeachers(fallbackData);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleViewStudents = (teacher: TeacherWithStudents) => {\n    setSelectedTeacher(teacher);\n  };\n\n  const handleBackToList = () => {\n    setSelectedTeacher(null);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <div className=\"spinner\"></div>\n        <p>Loading teachers...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"teachers-page\">\n      <div className=\"header\">\n        <h1>School Management System</h1>\n        <p>List of Teachers and Their Students</p>\n        \n        {error && (\n          <div className=\"error-banner\">\n            ‚ö†Ô∏è {error} \n            {usingFallback && (\n              <span> \n                Make sure the backend server is running: \n                <code>cd backend && npm start</code>\n              </span>\n            )}\n          </div>\n        )}\n        \n        {usingFallback && !error && (\n          <div className=\"warning-banner\">\n            üîß Using demo data - Backend server not detected\n          </div>\n        )}\n      </div>\n\n      {selectedTeacher ? (\n        <>\n          <div className=\"header\">\n            <button className=\"back-button\" onClick={handleBackToList}>\n              ‚Üê Back to Teachers\n            </button>\n            <h1>Students of {selectedTeacher.name}</h1>\n          </div>\n          \n          <div className=\"teacher-detail\">\n            <img src={selectedTeacher.avatar} alt={selectedTeacher.name} className=\"teacher-detail-avatar\" />\n            <div className=\"teacher-detail-info\">\n              <h2>{selectedTeacher.name}</h2>\n              <p>{selectedTeacher.subject} ‚Ä¢ {selectedTeacher.experience}</p>\n              <p>{selectedTeacher.email}</p>\n            </div>\n          </div>\n\n          <div className=\"students-section\">\n            <h3>Students ({selectedTeacher.students.length})</h3>\n            <div className=\"students-list\">\n              {selectedTeacher.students.map(student => (\n                <StudentCard key={student.id} student={student} />\n              ))}\n            </div>\n          </div>\n        </>\n      ) : (\n        <div className=\"teachers-list\">\n          {teachers.map(teacher => (\n            <TeacherCard\n              key={teacher.id}\n              teacher={teacher}\n              studentCount={teacher.students.length}\n              onViewStudents={() => handleViewStudents(teacher)}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}